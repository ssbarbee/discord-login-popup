import{R as e}from"./index-RYns6xqu.js";const D=t=>!!t.access_token,P=t=>!!t.code,T=t=>!!t.error||!!t.error_description,L=({popupWidth:t=700,popupHeight:c=800,redirectUrl:h,scopes:l="identify",onStart:d,onError:r,onSuccess:p,discordAppClientId:m,onClose:u,responseType:s="token"})=>{const w=`scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=${t},height=${c},left=${window.innerWidth/2-t/2},top=${window.innerHeight/2-c/2}`,i=`https://discord.com/api/oauth2/authorize?client_id=${m}&response_type=${s}&redirect_uri=${h}&scope=${l}`,n=window.open(i,"Discord Auth",w);typeof d=="function"&&d();const a=window.setInterval(()=>{var o;n.postMessage({params:{responseType:s},source:"discord-login-popup"},((o=window==null?void 0:window.location)==null?void 0:o.origin)||"*")},500),C=window.setInterval(function(){n!=null&&n.closed&&(window.clearInterval(C),typeof u=="function"&&u())},500);window.addEventListener("message",o=>{let E=!1;const f=o.data;D(f)||P(f)?(typeof p=="function"&&p(f),E=!0):T(f)&&(typeof r=="function"&&r(f),E=!0),E&&(window.clearInterval(C),window.clearInterval(a),n.close())},!1)},v=()=>e.createElement("svg",{fill:"none",height:"32",viewBox:"0 0 33 32",width:"33",xmlns:"http://www.w3.org/2000/svg"},e.createElement("g",{clipPath:"url(#clip0_10031_177575)"},e.createElement("mask",{height:"25",id:"mask0_10031_177575",maskUnits:"userSpaceOnUse",style:{maskType:"luminance"},width:"33",x:"0",y:"4"},e.createElement("path",{d:"M32.5034 4.00195H0.503906V28.7758H32.5034V4.00195Z",fill:"#fff"})),e.createElement("g",{mask:"url(#mask0_10031_177575)"},e.createElement("path",{d:"M27.5928 6.20817C25.5533 5.27289 23.3662 4.58382 21.0794 4.18916C21.0378 4.18154 20.9962 4.20057 20.9747 4.23864C20.6935 4.73863 20.3819 5.3909 20.1637 5.90358C17.7042 5.53558 15.2573 5.53558 12.8481 5.90358C12.6299 5.37951 12.307 4.73863 12.0245 4.23864C12.003 4.20184 11.9614 4.18281 11.9198 4.18916C9.63431 4.58255 7.44721 5.27163 5.40641 6.20817C5.38874 6.21578 5.3736 6.22848 5.36355 6.24497C1.21508 12.439 0.078646 18.4809 0.636144 24.4478C0.638667 24.477 0.655064 24.5049 0.677768 24.5227C3.41481 26.5315 6.06609 27.7511 8.66815 28.5594C8.70979 28.5721 8.75392 28.5569 8.78042 28.5226C9.39594 27.6826 9.94461 26.7968 10.4151 25.8653C10.4428 25.8107 10.4163 25.746 10.3596 25.7244C9.48927 25.3945 8.66058 24.9922 7.86343 24.5354C7.80038 24.4986 7.79533 24.4084 7.85333 24.3653C8.02108 24.2397 8.18888 24.109 8.34906 23.977C8.37804 23.9529 8.41842 23.9478 8.45249 23.963C13.6894 26.3526 19.359 26.3526 24.5341 23.963C24.5682 23.9465 24.6086 23.9516 24.6388 23.9757C24.799 24.1077 24.9668 24.2397 25.1358 24.3653C25.1938 24.4084 25.19 24.4986 25.127 24.5354C24.3298 25.0011 23.5011 25.3945 22.6296 25.7232C22.5728 25.7447 22.5476 25.8107 22.5754 25.8653C23.0559 26.7955 23.6046 27.6812 24.2087 28.5213C24.234 28.5569 24.2794 28.5721 24.321 28.5594C26.9357 27.7511 29.5869 26.5315 32.324 24.5227C32.348 24.5049 32.3631 24.4783 32.3656 24.4491C33.0328 17.5506 31.2481 11.5584 27.6344 6.24623C27.6256 6.22848 27.6105 6.21578 27.5928 6.20817ZM11.1971 20.8146C9.62043 20.8146 8.32129 19.3679 8.32129 17.5913C8.32129 15.8146 9.59523 14.368 11.1971 14.368C12.8115 14.368 14.0981 15.8273 14.0729 17.5913C14.0729 19.3679 12.7989 20.8146 11.1971 20.8146ZM21.8299 20.8146C20.2533 20.8146 18.9541 19.3679 18.9541 17.5913C18.9541 15.8146 20.228 14.368 21.8299 14.368C23.4444 14.368 24.7309 15.8273 24.7057 17.5913C24.7057 19.3679 23.4444 20.8146 21.8299 20.8146Z",fill:"var(--white-500)"}))),e.createElement("defs",null,e.createElement("clipPath",{id:"clip0_10031_177575"},e.createElement("rect",{fill:"#fff",height:"32",transform:"translate(0.5)",width:"32"}))));v.__docgenInfo={description:"",methods:[],displayName:"DiscordIcon"};const I=({discordAppClientId:t,redirectUrl:c,scopes:h="identify",responseType:l="token"})=>{const[d,r]=e.useState(""),[p,m]=e.useState(""),[u,s]=e.useState(null),[w,i]=e.useState(""),[n,a]=e.useState(!1);if(!t)throw new Error("For this story to work, discordAppClientId is required");if(!c)throw new Error("For this story to work, redirectUrl is required");if(!l)throw new Error("For this story to work, responseType is required");const C=()=>{L({discordAppClientId:t,onClose:()=>{r(""),m(""),s(null),a(!1),i("")},onError:o=>{r(""),m(""),s(null),i(o.error_description),a(!1)},onStart:()=>{a(!0),i("")},onSuccess:o=>{r(o.access_token),m(o.code),s(o.expires_in),i(""),a(!1)},redirectUrl:c,responseType:l,scopes:h})};return e.createElement("div",{className:"main-container"},e.createElement("h1",{className:"heading"},"Discord Login: responseType is ",e.createElement("i",null,l)),e.createElement("div",{className:"container"},e.createElement("button",{className:"button",onClick:C},e.createElement(v,null),n?"Loading...":"",n?"":"Login Discord"),w&&e.createElement("div",{className:"error"},e.createElement("p",null,w)),d&&e.createElement("div",{className:"token"},e.createElement("p",null,"Token: ",d)),p&&e.createElement("div",{className:"token"},e.createElement("p",null,"Code: ",p)),u&&e.createElement("div",{className:"token"},e.createElement("p",null,"Expires In: ",u," Seconds"))))};I.__docgenInfo={description:"",methods:[],displayName:"ReactIntegration",props:{discordAppClientId:{required:!0,tsType:{name:"string",raw:"DiscordLoginPopupParams['discordAppClientId']"},description:""},redirectUrl:{required:!0,tsType:{name:"string",raw:"DiscordLoginPopupParams['redirectUrl']"},description:""},responseType:{required:!1,tsType:{name:"union",raw:"DiscordLoginPopupParams['responseType']"},description:"",defaultValue:{value:"'token'",computed:!1}},scopes:{required:!1,tsType:{name:"string",raw:"DiscordLoginPopupParams['scopes']"},description:"",defaultValue:{value:"'identify'",computed:!1}}}};const $={component:I,parameters:{layout:"centered"},title:"ReactIntegration"},g={args:{discordAppClientId:"1263854212983296073",redirectUrl:`${window.location.origin}/discord-login.html`,responseType:"token",scopes:"identify"}};var y,k,_;g.parameters={...g.parameters,docs:{...(y=g.parameters)==null?void 0:y.docs,source:{originalSource:`{
  args: {
    discordAppClientId: '1263854212983296073',
    redirectUrl: \`\${window.location.origin}/discord-login.html\`,
    responseType: 'token',
    scopes: 'identify'
  }
}`,...(_=(k=g.parameters)==null?void 0:k.docs)==null?void 0:_.source}}};const x=["Default"];export{g as Default,x as __namedExportsOrder,$ as default};
